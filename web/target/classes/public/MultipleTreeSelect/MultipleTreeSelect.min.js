(function(a){a.fn.extend({slimScroll:function(c){var b=a.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},c);this.each(function(){function i(h){if(s){h=h||window.event;var k=0;h.wheelDelta&&(k=-h.wheelDelta/120);h.detail&&(k=h.detail/3);a(h.target||h.srcTarget||h.srcElement).closest("."+b.wrapperClass).is(N.parent())&&H(k,!0);h.preventDefault&&!K&&h.preventDefault();K||(h.returnValue=!1)}}function H(m,h,l){K=!1;var k=N.outerHeight()-M.outerHeight();h&&(h=parseInt(M.css("top"))+m*parseInt(b.wheelStep)/100*M.outerHeight(),h=Math.min(Math.max(h,0),k),h=0<m?Math.ceil(h):Math.floor(h),M.css({top:h+"px"}));J=parseInt(M.css("top"))/(N.outerHeight()-M.outerHeight());h=J*(N[0].scrollHeight-N.outerHeight());l&&(h=m,m=h/N[0].scrollHeight*N.outerHeight(),m=Math.min(Math.max(m,0),k),M.css({top:m+"px"}));N.scrollTop(h);N.trigger("slimscrolling",~~h);g();G()}function f(){j=Math.max(N.outerHeight()/N[0].scrollHeight*N.outerHeight(),30);M.css({height:j+"px"});var h=j==N.outerHeight()?"none":"block";M.css({display:h})}function g(){f();clearTimeout(D);J==~~J?(K=b.allowPageScroll,o!=J&&N.trigger("slimscroll",0==~~J?"top":"bottom")):K=!1;o=J;j>=N.outerHeight()?K=!0:(M.stop(!0,!0).fadeIn("fast"),b.railVisible&&I.stop(!0,!0).fadeIn("fast"))}function G(){b.alwaysVisible||(D=setTimeout(function(){b.disableFadeOut&&s||e||d||(M.fadeOut("slow"),I.fadeOut("slow"))},1000))}var s,e,d,D,F,j,J,o,K=!1,N=a(this);if(N.parent().hasClass(b.wrapperClass)){var E=N.scrollTop(),M=N.siblings("."+b.barClass),I=N.siblings("."+b.railClass);f();if(a.isPlainObject(c)){if("height" in c&&"auto"==c.height){N.parent().css("height","auto");N.css("height","auto");var L=N.parent().parent().height();N.parent().css("height",L);N.css("height",L)}else{"height" in c&&(L=c.height,N.parent().css("height",L),N.css("height",L))}if("scrollTo" in c){E=parseInt(b.scrollTo)}else{if("scrollBy" in c){E+=parseInt(b.scrollBy)}else{if("destroy" in c){M.remove();I.remove();N.unwrap();return}}}H(E,!1,!0)}}else{if(!(a.isPlainObject(c)&&"destroy" in c)){b.height="auto"==b.height?N.parent().height():b.height;E=a("<div></div>").addClass(b.wrapperClass).css({position:"relative",overflow:"hidden",width:b.width,height:b.height});N.css({overflow:"hidden",width:b.width,height:b.height});var I=a("<div></div>").addClass(b.railClass).css({width:b.size,height:"100%",position:"absolute",top:0,display:b.alwaysVisible&&b.railVisible?"block":"none","border-radius":b.railBorderRadius,background:b.railColor,opacity:b.railOpacity,zIndex:90}),M=a("<div></div>").addClass(b.barClass).css({background:b.color,width:b.size,position:"absolute",top:0,opacity:b.opacity,display:b.alwaysVisible?"block":"none","border-radius":b.borderRadius,BorderRadius:b.borderRadius,MozBorderRadius:b.borderRadius,WebkitBorderRadius:b.borderRadius,zIndex:99}),L="right"==b.position?{right:b.distance}:{left:b.distance};I.css(L);M.css(L);N.wrap(E);N.parent().append(M);N.parent().append(I);b.railDraggable&&M.bind("mousedown",function(k){var h=a(document);d=!0;t=parseFloat(M.css("top"));pageY=k.pageY;h.bind("mousemove.slimscroll",function(l){currTop=t+l.pageY-pageY;M.css("top",currTop);H(0,M.position().top,!1)});h.bind("mouseup.slimscroll",function(l){d=!1;G();h.unbind(".slimscroll")});return !1}).bind("selectstart.slimscroll",function(h){h.stopPropagation();h.preventDefault();return !1});I.hover(function(){g()},function(){G()});M.hover(function(){e=!0},function(){e=!1});N.hover(function(){s=!0;g();G()},function(){s=!1;G()});N.bind("touchstart",function(k,h){k.originalEvent.touches.length&&(F=k.originalEvent.touches[0].pageY)});N.bind("touchmove",function(h){K||h.originalEvent.preventDefault();h.originalEvent.touches.length&&(H((F-h.originalEvent.touches[0].pageY)/b.touchScrollStep,!0),F=h.originalEvent.touches[0].pageY)});f();"bottom"===b.start?(M.css({top:N.outerHeight()-M.outerHeight()}),H(0,!0)):"top"!==b.start&&(H(a(b.start).position().top,null,!0),b.alwaysVisible||M.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}}});return this}});a.fn.extend({slimscroll:a.fn.slimScroll})})(jQuery);(function(h){var d;var e={textLabel:"",zNodes:[],async:{enable:false,url:""},callback:{onCheck:function(l){}},chkStyle:"checkbox",radioType:"all",height:"auto"};var j=function(n,m){this.$target_element=h(n);_self=this;var l=function(){return h.extend({},e,m,_self.$target_element.data())};this.options=i(new l());this.init()};function b(l){return Number(Math.random().toString().substr(3,l)+new Date().getTime()).toString(36)}var i=function(n){var l={};if(n instanceof Array){l=[]}for(var m in n){var o=n[m];l[m]=typeof o==="object"?i(o):o
}return l};j.prototype={constructor:j,init:function(){var l=this;this.targetOffset=this.$target_element.offset();this.$target_element.nameLabel=this.$target_element.attr("name");this.$target_element.idLabel=this.$target_element.attr("id");this.$target_element.checks=this.$target_element.attr("checks");if(this.$target_element.idLabel===undefined||this.$target_element.idLabel===""){this.$target_element.idLabel=b(3)}if(this.$target_element.nameLabel===undefined||this.$target_element.nameLabel===""){this.$target_element.nameLabel=b(3)}this.$target_element.attr("name",this.options.textLabel===""?this.$target_element.nameLabel+"text":this.options.textLabel);this.init_tree_container=c.call(this);this.init_ztree=f.call(this);g.call(this)},getChecks:function(p){var n=this.$zTreeObj;nodes=n.getCheckedNodes(true),v="";rv="";for(var o=0,m=nodes.length;o<m;o++){v+=nodes[o].name+",";rv+=nodes[o].id+","}if(v.length>0){v=v.substring(0,v.length-1)}if(rv.length>0){rv=rv.substring(0,rv.length-1)}if("val"===p){return rv}if("text"===p){return v}}};var g=function(){var l=this.tree_container;this.$target_element.click(function(m){m.stopPropagation();if(!l.is(":visible")){l.slideDown("fast")}else{l.animate({height:"toggle",opacity:"toggle"},"fast")}});this.all_container.mouseleave(function(){if(l.is(":visible")){l.animate({height:"toggle",opacity:"toggle"},"fast")}});this.tree_container.find("a").mouseleave(function(m){m.stopPropagation()});this.tree_container.find("span").mouseleave(function(m){m.stopPropagation()})};var c=function(){this.ztreeid=this.$target_element.idLabel+"_zTree";this.$target_element.css({display:"block"});this.all_container=this.$target_element.wrap('<div class="mts-container" style="inline-block;position: relative;"/>').parent();this.tree_container=h('<div   class="menuContent" style="display:none;background-color: white; position: absolute;z-index:110004;border: solid 1px;border-radius: 5px;padding-bottom: 10px" >'+'<ul id="'+this.ztreeid+'" class="ztree" style="padding:0 0;margin-top:0;border: none;border-radius: 5px;  height:'+this.options.height+"; width:"+a(this.$target_element)+'; background-color: white"></ul>'+"</div>").insertAfter(this.$target_element);this.checked_val_element=h('<input type="hidden" name="'+this.$target_element.nameLabel+'">').insertAfter(this.tree_container);h("#"+this.ztreeid).slimScroll({height:this.options.height,width:a(this.$target_element)});return this};function a(l){return l.outerWidth()-2}var f=function(){var s=this.$target_element;var r=this.checked_val_element;var o=this.$target_element.checks;var n=this.options.callback.onCheck;ztreeonAsyncSuccess=function(u,x,w,y){l.setting.callback.onCheck();h("#"+x).find("a").mouseleave(function(z){z.stopPropagation()});h("#"+x).find("span").mouseleave(function(z){z.stopPropagation()})};var m=function(x,u){if(x!=""&&x!=undefined&&x!=null){var w=x.split(",");for(var z=0;z<u.length;z++){for(var y=0;y<w.length;y++){if((""+u[z].id)===w[y]){u[z].checked=true}}}}return u};var q=function(z,y,x){nodes=l.getCheckedNodes(true),v="";rv="";for(var w=0,u=nodes.length;w<u;w++){v+=nodes[w].name+",";rv+=nodes[w].id+","}if(v.length>0){v=v.substring(0,v.length-1)}if(rv.length>0){rv=rv.substring(0,rv.length-1)}s.val(v);r.attr("value",rv);n(nodes)};var p={check:{enable:true,chkboxType:{"Y":"","N":""},chkStyle:this.options.chkStyle,radioType:this.options.radioType},view:{dblClickExpand:false},data:{simpleData:{enable:true}},callback:{onCheck:q,onAsyncSuccess:ztreeonAsyncSuccess,onClick:function(y,x,w,u){l.checkNode(w,!w.checked,true);l.setting.callback.onCheck()}},async:this.options.async};p.async.dataFilter=function(x,u,w){if(w){m(o,w)}return w};this.options.zNodes=m(o,this.options.zNodes);var l=h.fn.zTree.init(h("#"+this.ztreeid),p,this.options.zNodes);l.setting.callback.onCheck();this.$zTreeObj=l;return this};var k=function(m,l){this.$target_element=h(m);this.$target_element.hide()};h.fn.drawMultipleTree=function(l){var m=arguments[0],n;args=arguments;this.each(function(){var o=h(this);data=o.data("drawMultipleTree");if(!data){h.data(this,"drawMultipleTree",new j(this,l))}if(typeof m==="string"){n=data[m](args[1])}});return typeof n!=="undefined"?n:this}})(jQuery);